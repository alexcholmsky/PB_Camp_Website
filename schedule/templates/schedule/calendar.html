{% extends "schedule/base.html" %}
{% load static%}
{% block content%}
<br>
<div style='text-align:center'>
Ready to register? 
<button class="btn actionButton  btn-lg"> Click here </button>
</div>
<br>
<table id='calendar' class="table">
  <thead>
    <tr>
      <th scope="col">Week</th>
      <th scope="col">Start Date</th>
      <th scope="col">End Date</th>
      <th scope="col">Spots Available</th>
      <th scope="col">Price Per Child</th>
    </tr>
  </thead>
  <tbody>
  </tbody>
</table>


{% endblock %}


{% block javascriptvar%}
<script>
var activeTab = 'calendarButton'

</script>

{% endblock%}


{% block javascriptmethod %}

<script>
function createCells(row, cellOptions){
  for(e=0; e < 5; e++){
  console.log(e);
  row.insertCell(e).innerHTML = cellOptions[e];
  }
}

fetch('/api/v1')
    .then(response =>
        response.json()
        )
    .then(data => {
        let schedule = data
        let price = '$150 per week'
        let table = document.getElementById("calendar");
        for (let i=0; i < schedule.length; ++i) {
          let startDate = schedule[i].start_date;
          let endDate = schedule[i].end_date;
          let numSpots = 6 - schedule[i].num_child;
          let cellOptions = [i+1, startDate, endDate, numSpots, price]
          // Create an empty <tr> element and add it to the xth position of the table:
          let row = table.insertRow(i+1);

          createCells(row, cellOptions); 
        }
    })
</script>
{% endblock%}


